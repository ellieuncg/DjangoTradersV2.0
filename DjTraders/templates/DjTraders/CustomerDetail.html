{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="page-header">
    <h1>{{ customer.customer_name }}</h1>
    <div class="header-stats">{{ customer.NumberOfOrders }} orders placed</div>
</div>

<div class="content-area">
    <h2>Customer Details</h2>
    <div class="details">
        <div class="detail-row">
            <span class="detail-label">Contact:</span>
            <span>{{ customer.contact_name }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Address:</span>
            <span>{{ customer.address }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Location:</span>
            <span>{{ customer.city }}, {{ customer.country }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Status:</span>
            <span>Active (Last activity: {{ customer.last_activity_date|date:"M d, Y" }})</span>
        </div>
    </div>

    <div class="actions">
        <a href="{% url 'DjTraders:CustomerUpdate' pk=customer.pk %}" class="btn-icon">
            <i class="fas fa-pen"></i>
        </a>
        <a href="{% url 'DjTraders:CustomerCreate' %}" class="btn-icon accent">
            <i class="fas fa-plus"></i>
        </a>
        <a href="{% url 'DjTraders:CustomerArchive' pk=customer.pk %}" 
           class="btn-icon danger"
           onclick="return confirm('Are you sure you want to archive this customer?');">
            <i class="fas fa-box-archive"></i>
        </a>
        <a href="{% url 'DjTraders:Customers' %}" class="btn-icon accent">
            <i class="fas fa-chevron-left"></i>
        </a>
    </div>

    <h2>Order History</h2>
    {% for order in customer_orders %}
    <div class="order">
        <div class="order-id">{{ order.order_id }}</div>
        <div class="order-details">
            {% for detail in order.order_details %}
                {{ detail.quantity }}x {{ detail.product_name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>
        <div class="order-total">${{ order.order_total }}</div>
    </div>
    {% empty %}
    <div class="empty-state">No orders found for this customer.</div>
    {% endfor %}
</div>
{% endblock %}
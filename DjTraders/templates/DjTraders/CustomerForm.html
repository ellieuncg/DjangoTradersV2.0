{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <h1>{% if form.instance.pk %}Update{% else %}New{% endif %} Customer</h1>
</div>

<div class="form-container">
    <div class="detail-card">
        <form method="post" class="detail-form">
            {% csrf_token %}
            
            <div class="detail-row">
                <span class="detail-label">Customer name:</span>
                <div class="detail-field">
                    {{ form.customer_name }}
                    {% if form.customer_name.errors %}
                        <div class="error-message">
                            {{ form.customer_name.errors|join:", " }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="detail-row">
                <span class="detail-label">Contact name:</span>
                <div class="detail-field">
                    {{ form.contact_name }}
                    {% if form.contact_name.errors %}
                        <div class="error-message">
                            {{ form.contact_name.errors|join:", " }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="detail-row">
                <span class="detail-label">Address:</span>
                <div class="detail-field">
                    {{ form.address }}
                    {% if form.address.errors %}
                        <div class="error-message">
                            {{ form.address.errors|join:", " }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="detail-row">
                <span class="detail-label">City:</span>
                <div class="detail-field">
                    {{ form.city }}
                    {% if form.city.errors %}
                        <div class="error-message">
                            {{ form.city.errors|join:", " }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="detail-row">
                <span class="detail-label">Postal code:</span>
                <div class="detail-field">
                    {{ form.postal_code }}
                    {% if form.postal_code.errors %}
                        <div class="error-message">
                            {{ form.postal_code.errors|join:", " }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="detail-row">
                <span class="detail-label">Country:</span>
                <div class="detail-field">
                    {{ form.country }}
                    {% if form.country.errors %}
                        <div class="error-message">
                            {{ form.country.errors|join:", " }}
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="action-buttons">
                <!-- Save Button -->
                <button type="submit" class="action-btn save-btn" title="Save" 
                        onclick="return confirm('Are you sure you want to save these changes?');">
                    <i class="fas fa-save"></i>
                </button>

                <!-- Archive Button (only show for existing customers) -->
                {% if customer and customer.status != 'archived' %}
                    <a href="{% url 'DjTraders:CustomerArchive' pk=customer.pk %}" 
                       class="action-btn status-btn" 
                       title="Archive Customer"
                       onclick="return confirm('Are you sure you want to archive this customer?');">
                        <i class="fas fa-box-archive"></i>
                    </a>
                {% endif %}

                <!-- Return Button -->
                {% if customer %}
                    <a href="{% url 'DjTraders:CustomerDetail' pk=customer.pk %}" class="action-btn return-btn" title="Return">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                {% else %}
                    <a href="{% url 'DjTraders:Customers' %}" class="action-btn return-btn" title="Return">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                {% endif %}
            </div>
        </form>
    </div>
</div>
{% endblock %}